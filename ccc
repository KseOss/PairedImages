using Microsoft.Maui.ApplicationModel.Communication;
using Microsoft.Maui.ApplicationModel;

namespace PR6_MAUI
{
    public static class NotificationService
    {
        public static async Task ShowNotification(string title, string message)
        {
            // Для Android
            if (DeviceInfo.Platform == DevicePlatform.Android)
            {
                // Встроенное уведомление MAUI
                await Application.Current.MainPage.DisplayAlert(title, message, "OK");
                
                // Дополнительно: вибрация
                try
                {
                    Vibration.Default.Vibrate(TimeSpan.FromSeconds(1));
                }
                catch (Exception ex)
                {
                    Console.WriteLine($"Vibration error: {ex.Message}");
                }
            }
            // Для Windows
            else if (DeviceInfo.Platform == DevicePlatform.WinUI)
            {
                await Application.Current.MainPage.DisplayAlert(title, message, "OK");
            }
            // Для iOS/MacCatalyst
            else
            {
                await Application.Current.MainPage.DisplayAlert(title, message, "OK");
            }
        }

        public static async Task ShowPersistentNotification(string title, string message)
        {
            // Альтернатива: использовать диалоговое окно, которое требует действия пользователя
            bool result = await Application.Current.MainPage.DisplayAlert(
                title, 
                message, 
                "OK", 
                "Отмена");
            
            if (result)
            {
                // Действие при нажатии OK
                Console.WriteLine("User confirmed notification");
            }
        }
    }
}